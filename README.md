Dummy data generator, eGFR, ARI and NNH calculator for investigating harm caused by bias in health algorithm
Not based on real data, for educational use only

Background

Bias in medicine and the healthcare system has been a problem from the outset, but only in recent decades is it being addressed. Clinicians may have intrinsic biases that affect the care they deliver, and systematic injustices are perpetrated as well. This is in direct opposition to the ethical principles of beneficence, non-maleficence, and justice. A substantial risk are algorithms that are driven by biased data. In recent years, an algorithm used to adjust the estimated glomerular filtration rate (eGFR- a measure of renal function) for Black patients, has been found to be based on flawed and biased data (Vyas, Eisenstein, and Jones 2020). Many laboratories still report this adjustment on their autogenerated reports. This adjustment leads to an overestimation of eGFR that can result in delays in receiving crucial kidney care, such as nephrology specialist consults, medications, dialysis, and transplant (Eneanya, Yang, and Reese 2019).

This tool generates dummy data that is then used to perform an incidence rate, absolute risk increase (ARI) and number-needed-to-harm (NNH) analysis. The ARI is the difference between the incidence rate in the experimental group and the control group. For example, if the ARI is 0.01 or 1%, that means the risk has increased by 1 percentage point. The NNH is the inverse of the ARI and would therefore be 100, meaning for approximately 100 individuals exposed, there will be one individual harmed.

Barriers and limitations of this study include the use of dummy data in lieu of real data and may therefore be less accurate in reflecting the true harm done. At the time of the study, this author was unable to find a publicly available dataset that included all the necessary information to do this type of analysis otherwise. The study also does not assess the broader costs to the patients, families, and the community at large. It only analyzes whether a subject may have missed out on having a consultation with a nephrologist. 

To perform the analysis the eGFR equations and truth tables were coded into Python (version 3.12.0). The library PANDAS (version 3.0) was used for setting up the data frames. NUMPY (version 1.26.3) and SCIPY (version 1.12.0) libraries were used to generate dummy data. Data visualizations were done with SEABORN (version 0.13.2) and MATPLOTLIB (version 3.8.3). For this example, the sample size is 10,000 and the age distribution is skewed for a more accurate representation of a population that drops off with age. The population of Black individuals is 10% and can be changed depending on the demographics. Biological sex data was generated from a random seed and is expected to be approximately a 1:1 female:male ratio. Creatinine data was generated using a uniform distribution from normal (0.5 mg/dL to 1.5 mg/dL) into the abnormal range (> 1.5 mg/dL) to represent a population with both healthy and unhealthy individuals. The upper limit was arbitrarily set to a very high creatinine value of 10.0 mg/dL, but this value could be adjusted as well.

These data was parsed and sorted into multiple data frames for the epidemiological analysis. The exposure in this case is whether the algorithm was applied or not (i.e. whether the subject was categorized as Black or not Black). The negative outcome of interest was whether the eGFR rose above a threshold of 30 mg/dL with the adjustment, which is the threshold that would trigger an automatic referral for consultation with a nephrologist (Oliva-Damaso et al. 2022). There are technically zero subjects who would fall into the unexposed and effected group, because subjects who are not categorized as Black are not exposed to the adjustment and therefore cannot experience the negative outcome. To avoid a null value, the negligible value of 0.5 was used for group C. After the data parsing, the values for these four groups were used in standard epidemiological equations to calculate the experimental event rate, control event rate, absolute risk increase and number needed to harm (Friedman 2004).

Installation and Use

Install Python (version 3.12.0)
Install Dependencies: PANDAS (version 3.0) NUMPY (version 1.26.3) SCIPY (version 1.12.0) SEABORN (version 0.13.2) MATPLOTLIB (version 3.8.3)

To see the individual SEABORN and MATPLOTLIB, uncomment them one at a time.

References

Eneanya, Nwamaka Denise, Wei Yang, and Peter Philip Reese. 2019. “Reconsidering the Consequences of Using Race to Estimate Kidney Function.” JAMA 322, no. 2 (July): 113–14. https://doi.org/10.1001/jama.2019.5774.

Friedman, Gary D. 2004. Primer of Epidemiology. New York: Mcgraw-Hill, Medical Pub. Division.

Oliva-Damaso, Nestor, Pierre Delanaye, Elena Oliva-Damaso, Juan Payan, and Richard J Glassock. 2022. “Risk Based versus GFR Threshold Criteria for Nephrology Referral in Chronic Kidney Disease.” Clinical Kidney Journal, April (April). https://doi.org/10.1093/ckj/sfac104.

Vyas, Darshali A., Leo G. Eisenstein, and David S. Jones. 2020. “Hidden in Plain Sight — Reconsidering the Use of Race Correction in Clinical Algorithms.” Edited by Debra Malina. New England Journal of Medicine 383, no. 9 (June). https://doi.org/10.1056/nejmms2004740.


